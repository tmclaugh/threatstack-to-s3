language: python
python:
- '3.6'
install: pip install -r requirements.txt -t .
script:
- true
after_success:
- mkdir dist
- find ./ -name '*.pyc' -delete
- zip -r dist/threatstack-to-s3.zip . -x '.git/*' -x 'dist/*'
- cp deploy/cloudformation.json dist/threatstack-to-s3.json
deploy:
  skip_cleanup: true
  provider: s3
  access_key_id:
    secure: "Aq1v1I3IGNxmzRy/QTjx2rbBuGhDjF5zJlNJ8qlKPyCAPLvIz28kjIUbJU1qSLDvkGjdV/goReiCQmBDd3qbet+gXmVUnzVhOSR38TFkdY/cM1sdFGwgVbBxFa8RIfBFbM47WTcBuCa0g/PmnjVN5pklgaMjwgpp5u6VoYFFYmbEwSSiHbEM12dASh6jRc+yR3/h4lRhoM6URh/plWbDri3CvrkHo09DnaqHddfIUDryZKpPWNk9kyYvpsjXcriSgFFE37HPGVk7B8mDJLz9gRyv00r9ScGa8jtbTt0ucY+tR0YU+Iol39mjnH4bwOdgCc0lgT6tojQx3sWmYpnytZiRsYtLgg35EFIMiYwZKvjl6tO5E6l1mSZC6IR4rN8V/YGCj/75XHdwxv5iEiiA2Au0s9UC7KUfSTbS4lNgUkey/KcFzTxHKL0nFFlb8UKACV5io2em9fve310Gls1/7P2GawJSlQ5Yty3xgixQy+5ubUV0v/pvL8EWOlR290dHF9RDOoHqzf7v/Df6umoXISjyVfTvNKnP+zEi4fv2l6RSB2t8L7uxjSWJlHLdQdXoWZxfaeMM8AVDYejuhC7PDHr3eXjrZiU/tcRqyGEi3oBYMUvXXudxrHe3aJ1IHHBLpfGe5R5v1XFrrg/wna8c92NNMxcb+PBJXqFGJ4MMpd4="
  secret_access_key:
    secure: "aqFrBvuVLHaXB8eZDq+kso2lEPpIUmvB7fxqkXDtCZtkzl68x8daKNAhqpko1n8EodBGxfumENcxOOWFNEVeNLv3X8lplXAe2i9HL6WxNK49yyclO7+VfYg5JzhlcpX2awfYWiQmpYP4P5Pla4ByDorejfWRjZkagTEl5bqcG0vAWPwt1FR5ZkH5KPBhP9WbYJNuOV/bTvy8t1N+TIbTpp6zp6DqM87e7cn3+XwLzKqAgS+OKirDdCJYCFeHSdzGOZsCbtJ+sMAzot3ET1KvBZFPjBr2lT/QOB87JrOk7VlEvh2987AdCVz241NtWLlnjcnSz0KilQ5AjlqDylU1z7ocXpbF3TGekxKyMO/VwuowCfLXKzMjKn9JIH2Un6l1HdCxQ8MLX3VP7AIagkyEu50IrmbA0AyKw8xbar1TJ+lDe5LFoq6e681QRc6SeOEMJ8EOOBVHI+PRlH5lQ5ZdHcauFlE63WUZrpl8whcxKgC9crUp17kE8wHlwOigEtFt3iE7TAFI/5AwkPzKw+upUakeHTBVyXhc8jzyOzCkLTQDoj135qaUVNTQRs2g2fytORnUkfhDsOVmOWB0NCdrHyAd6kGZgdGs6Ns7M+K9/kSUHk57oQulV8DIPNidgkJRqfU8j24NwQxRJQR1JMm9V0n5P6WQ8EFYYfBB6+Dx+mI="
  bucket: straycat-dhs-org-straycat-lambda-deploys
  local-dir: dist
  acl: public_read
  on:
    repo: tmclaugh/threatstack-to-s3
